(function(S,p){typeof exports=="object"&&typeof module<"u"?p(exports,require("three"),require("react"),require("@react-three/fiber"),require("@react-three/drei")):typeof define=="function"&&define.amd?define(["exports","three","react","@react-three/fiber","@react-three/drei"],p):(S=typeof globalThis<"u"?globalThis:S||self,p(S.StickmanAnimatorRuntime={},S.THREE,S.React,S.ReactThreeFiber,S.ReactThreeDrei))})(this,function(S,p,C,ne,He){"use strict";var Pr=Object.defineProperty;var Ar=(S,p,C)=>p in S?Pr(S,p,{enumerable:!0,configurable:!0,writable:!0,value:C}):S[p]=C;var D=(S,p,C)=>Ar(S,typeof p!="symbol"?p+"":p,C);let Q;const Je=new Uint8Array(16);function Ge(){if(!Q&&(Q=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Q))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Q(Je)}const x=[];for(let i=0;i<256;++i)x.push((i+256).toString(16).slice(1));function Be(i,t=0){return x[i[t+0]]+x[i[t+1]]+x[i[t+2]]+x[i[t+3]]+"-"+x[i[t+4]]+x[i[t+5]]+"-"+x[i[t+6]]+x[i[t+7]]+"-"+x[i[t+8]]+x[i[t+9]]+"-"+x[i[t+10]]+x[i[t+11]]+x[i[t+12]]+x[i[t+13]]+x[i[t+14]]+x[i[t+15]]}const ve={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function oe(i,t,s){if(ve.randomUUID&&!i)return ve.randomUUID();i=i||{};const o=i.random||(i.rng||Ge)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,Be(o)}class P{constructor(t,s,o){D(this,"id");D(this,"name");D(this,"position");D(this,"children");this.id=o||oe(),this.name=t,this.position=s,this.children=[]}addChild(t){this.children.push(t)}clone(){const t=new P(this.name,this.position.clone(),this.id);return t.children=this.children.map(s=>s.clone()),t}findNode(t){if(this.id===t)return this;for(const s of this.children){const o=s.findNode(t);if(o)return o}return null}}class Z{constructor(t,s=.35,o=.1){D(this,"root");D(this,"headRadius");D(this,"strokeWidth");t?this.root=t:this.root=this.createDefaultSkeleton(),this.headRadius=s,this.strokeWidth=o}get nodes(){const t=[],s=o=>{t.push(o),o.children.forEach(s)};return s(this.root),t}createDefaultSkeleton(){const t=new P("hip",new p.Vector3(0,1,0)),s=new P("torso",new p.Vector3(0,1.5,0)),o=new P("neck",new p.Vector3(0,1.8,0)),h=new P("head",new p.Vector3(0,2.1,0));t.addChild(s),s.addChild(o),o.addChild(h);const f=new P("leftElbow",new p.Vector3(-.4,1.5,0)),w=new P("leftHand",new p.Vector3(-.6,1.2,0)),k=new P("rightElbow",new p.Vector3(.4,1.5,0)),g=new P("rightHand",new p.Vector3(.6,1.2,0));o.addChild(f),f.addChild(w),o.addChild(k),k.addChild(g);const R=new P("leftKnee",new p.Vector3(-.3,.5,0)),m=new P("leftFoot",new p.Vector3(-.3,0,0)),c=new P("rightKnee",new p.Vector3(.3,.5,0)),u=new P("rightFoot",new p.Vector3(.3,0,0));return t.addChild(R),R.addChild(m),t.addChild(c),c.addChild(u),t}clone(){return new Z(this.root.clone(),this.headRadius,this.strokeWidth)}lerp(t,s){const o=this.clone();return o.headRadius=this.headRadius+(t.headRadius-this.headRadius)*s,o.strokeWidth=this.strokeWidth+(t.strokeWidth-this.strokeWidth)*s,this._lerpNode(o.root,t.root,s),o}_lerpNode(t,s,o){t.id===s.id&&t.position.lerp(s.position,o);for(let h=0;h<t.children.length;h++){const f=t.children[h];h<s.children.length&&this._lerpNode(f,s.children[h],o)}}getAllNodes(){return this.nodes}updateNodePosition(t,s){const o=this.root.findNode(t);o&&o.position.copy(s)}}function ze(i){try{const t=JSON.parse(i),s=t.format==="sa3"||!!t.skin||!!t.polygons;let o=1,h=0;const f=s?1:-1,w=t.clips||(t.keyframes?[t]:[]);let k=new Z;if(w.length===0)return{clips:[],currentSkeleton:k,meta:{skin:t.skin,polygons:t.polygons,headRadius:t.headRadius,strokeWidth:t.strokeWidth}};if(!s&&w.length>0){let c=1/0,u=-1/0;const O=j=>Array.isArray(j.pos)?{y:j.pos[1]*f}:j.position?{y:(j.position.y||0)*f}:{y:0},F=(w[0].keyframes||[])[0];if(F){const j=F.pose||F.skeleton,W=j.root||j,b=K=>{const{y:H}=O(K);H<c&&(c=H),H>u&&(u=H),K.children&&K.children.forEach(ae=>b(ae))};b(W);const L=u-c;L>.01?(o=2/L,h=-(c*o)):(o=.25,h=0)}else o=.25}const g=c=>{const u=new p.Vector3;Array.isArray(c.pos)?u.set(c.pos[0]*o,c.pos[1]*f*o+h,c.pos[2]*o):c.position&&u.set((c.position.x||0)*o,(c.position.y||0)*f*o+h,(c.position.z||0)*o);const O=new P(c.id||c.name,u,c.id);return c.children&&c.children.forEach(E=>O.addChild(g(E))),O},R=w.map(c=>{const u=(c.keyframes||[]).map(E=>{const F=E.pose||E.skeleton,j=new Z(void 0,(F.headRadius||t.headRadius||.1)*o,(F.strokeWidth||t.strokeWidth||.02)*o);return j.root=g(F.root||F),{id:E.id||oe(),timestamp:E.timestamp||(E.frameIndex?E.frameIndex/30:0),skeleton:j}});let O=c.duration||5;if(u.length>0){const E=Math.max(...u.map(F=>F.timestamp));O=E>0?E:5}return{id:c.id||oe(),name:c.name||"Imported Animation",duration:O,keyframes:u}}),m=R[0];return m&&m.keyframes.length>0&&(k=m.keyframes[0].skeleton.clone()),{clips:R,currentSkeleton:k,meta:{skin:t.skin||null,polygons:t.polygons||null,headRadius:k.headRadius,strokeWidth:k.strokeWidth}}}catch(t){throw console.error("Failed to parse project",t),new Error("Failed to parse stickman project JSON")}}var ie={exports:{}},B={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me;function Xe(){if(me)return B;me=1;var i=C,t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,h=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function w(k,g,R){var m,c={},u=null,O=null;R!==void 0&&(u=""+R),g.key!==void 0&&(u=""+g.key),g.ref!==void 0&&(O=g.ref);for(m in g)o.call(g,m)&&!f.hasOwnProperty(m)&&(c[m]=g[m]);if(k&&k.defaultProps)for(m in g=k.defaultProps,g)c[m]===void 0&&(c[m]=g[m]);return{$$typeof:t,type:k,key:u,ref:O,props:c,_owner:h.current}}return B.Fragment=s,B.jsx=w,B.jsxs=w,B}var z={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ye;function qe(){return ye||(ye=1,process.env.NODE_ENV!=="production"&&function(){var i=C,t=Symbol.for("react.element"),s=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),k=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),O=Symbol.for("react.offscreen"),E=Symbol.iterator,F="@@iterator";function j(e){if(e===null||typeof e!="object")return null;var r=E&&e[E]||e[F];return typeof r=="function"?r:null}var W=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(e){{for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];L("error",e,n)}}function L(e,r,n){{var a=W.ReactDebugCurrentFrame,v=a.getStackAddendum();v!==""&&(r+="%s",n=n.concat([v]));var y=n.map(function(d){return String(d)});y.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,y)}}var K=!1,H=!1,ae=!1,er=!1,rr=!1,Re;Re=Symbol.for("react.module.reference");function tr(e){return!!(typeof e=="string"||typeof e=="function"||e===o||e===f||rr||e===h||e===R||e===m||er||e===O||K||H||ae||typeof e=="object"&&e!==null&&(e.$$typeof===u||e.$$typeof===c||e.$$typeof===w||e.$$typeof===k||e.$$typeof===g||e.$$typeof===Re||e.getModuleId!==void 0))}function nr(e,r,n){var a=e.displayName;if(a)return a;var v=r.displayName||r.name||"";return v!==""?n+"("+v+")":n}function Ee(e){return e.displayName||"Context"}function U(e){if(e==null)return null;if(typeof e.tag=="number"&&b("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case o:return"Fragment";case s:return"Portal";case f:return"Profiler";case h:return"StrictMode";case R:return"Suspense";case m:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case k:var r=e;return Ee(r)+".Consumer";case w:var n=e;return Ee(n._context)+".Provider";case g:return nr(e,e.render,"ForwardRef");case c:var a=e.displayName||null;return a!==null?a:U(e.type)||"Memo";case u:{var v=e,y=v._payload,d=v._init;try{return U(d(y))}catch{return null}}}return null}var M=Object.assign,X=0,be,_e,we,ke,Te,Se,Ce;function xe(){}xe.__reactDisabledLog=!0;function or(){{if(X===0){be=console.log,_e=console.info,we=console.warn,ke=console.error,Te=console.group,Se=console.groupCollapsed,Ce=console.groupEnd;var e={configurable:!0,enumerable:!0,value:xe,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}X++}}function ir(){{if(X--,X===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:M({},e,{value:be}),info:M({},e,{value:_e}),warn:M({},e,{value:we}),error:M({},e,{value:ke}),group:M({},e,{value:Te}),groupCollapsed:M({},e,{value:Se}),groupEnd:M({},e,{value:Ce})})}X<0&&b("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var se=W.ReactCurrentDispatcher,ce;function $(e,r,n){{if(ce===void 0)try{throw Error()}catch(v){var a=v.stack.trim().match(/\n( *(at )?)/);ce=a&&a[1]||""}return`
`+ce+e}}var ue=!1,ee;{var ar=typeof WeakMap=="function"?WeakMap:Map;ee=new ar}function Oe(e,r){if(!e||ue)return"";{var n=ee.get(e);if(n!==void 0)return n}var a;ue=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var y;y=se.current,se.current=null,or();try{if(r){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(V){a=V}Reflect.construct(e,[],d)}else{try{d.call()}catch(V){a=V}e.call(d.prototype)}}else{try{throw Error()}catch(V){a=V}e()}}catch(V){if(V&&a&&typeof V.stack=="string"){for(var l=V.stack.split(`
`),A=a.stack.split(`
`),_=l.length-1,T=A.length-1;_>=1&&T>=0&&l[_]!==A[T];)T--;for(;_>=1&&T>=0;_--,T--)if(l[_]!==A[T]){if(_!==1||T!==1)do if(_--,T--,T<0||l[_]!==A[T]){var N=`
`+l[_].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),typeof e=="function"&&ee.set(e,N),N}while(_>=1&&T>=0);break}}}finally{ue=!1,se.current=y,ir(),Error.prepareStackTrace=v}var G=e?e.displayName||e.name:"",Y=G?$(G):"";return typeof e=="function"&&ee.set(e,Y),Y}function sr(e,r,n){return Oe(e,!1)}function cr(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function re(e,r,n){if(e==null)return"";if(typeof e=="function")return Oe(e,cr(e));if(typeof e=="string")return $(e);switch(e){case R:return $("Suspense");case m:return $("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case g:return sr(e.render);case c:return re(e.type,r,n);case u:{var a=e,v=a._payload,y=a._init;try{return re(y(v),r,n)}catch{}}}return""}var q=Object.prototype.hasOwnProperty,je={},Pe=W.ReactDebugCurrentFrame;function te(e){if(e){var r=e._owner,n=re(e.type,e._source,r?r.type:null);Pe.setExtraStackFrame(n)}else Pe.setExtraStackFrame(null)}function ur(e,r,n,a,v){{var y=Function.call.bind(q);for(var d in e)if(y(e,d)){var l=void 0;try{if(typeof e[d]!="function"){var A=Error((a||"React class")+": "+n+" type `"+d+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[d]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw A.name="Invariant Violation",A}l=e[d](r,d,a,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(_){l=_}l&&!(l instanceof Error)&&(te(v),b("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",a||"React class",n,d,typeof l),te(null)),l instanceof Error&&!(l.message in je)&&(je[l.message]=!0,te(v),b("Failed %s type: %s",n,l.message),te(null))}}}var lr=Array.isArray;function le(e){return lr(e)}function fr(e){{var r=typeof Symbol=="function"&&Symbol.toStringTag,n=r&&e[Symbol.toStringTag]||e.constructor.name||"Object";return n}}function dr(e){try{return Ae(e),!1}catch{return!0}}function Ae(e){return""+e}function Fe(e){if(dr(e))return b("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",fr(e)),Ae(e)}var Ve=W.ReactCurrentOwner,pr={key:!0,ref:!0,__self:!0,__source:!0},Ie,We;function hr(e){if(q.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function vr(e){if(q.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function mr(e,r){typeof e.ref=="string"&&Ve.current}function yr(e,r){{var n=function(){Ie||(Ie=!0,b("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}}function gr(e,r){{var n=function(){We||(We=!0,b("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}}var Rr=function(e,r,n,a,v,y,d){var l={$$typeof:t,type:e,key:r,ref:n,props:d,_owner:y};return l._store={},Object.defineProperty(l._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,"_self",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.defineProperty(l,"_source",{configurable:!1,enumerable:!1,writable:!1,value:v}),Object.freeze&&(Object.freeze(l.props),Object.freeze(l)),l};function Er(e,r,n,a,v){{var y,d={},l=null,A=null;n!==void 0&&(Fe(n),l=""+n),vr(r)&&(Fe(r.key),l=""+r.key),hr(r)&&(A=r.ref,mr(r,v));for(y in r)q.call(r,y)&&!pr.hasOwnProperty(y)&&(d[y]=r[y]);if(e&&e.defaultProps){var _=e.defaultProps;for(y in _)d[y]===void 0&&(d[y]=_[y])}if(l||A){var T=typeof e=="function"?e.displayName||e.name||"Unknown":e;l&&yr(d,T),A&&gr(d,T)}return Rr(e,l,A,v,a,Ve.current,d)}}var fe=W.ReactCurrentOwner,Ne=W.ReactDebugCurrentFrame;function J(e){if(e){var r=e._owner,n=re(e.type,e._source,r?r.type:null);Ne.setExtraStackFrame(n)}else Ne.setExtraStackFrame(null)}var de;de=!1;function pe(e){return typeof e=="object"&&e!==null&&e.$$typeof===t}function Ue(){{if(fe.current){var e=U(fe.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function br(e){return""}var De={};function _r(e){{var r=Ue();if(!r){var n=typeof e=="string"?e:e.displayName||e.name;n&&(r=`

Check the top-level render call using <`+n+">.")}return r}}function Me(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var n=_r(r);if(De[n])return;De[n]=!0;var a="";e&&e._owner&&e._owner!==fe.current&&(a=" It was passed a child from "+U(e._owner.type)+"."),J(e),b('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,a),J(null)}}function Ye(e,r){{if(typeof e!="object")return;if(le(e))for(var n=0;n<e.length;n++){var a=e[n];pe(a)&&Me(a,r)}else if(pe(e))e._store&&(e._store.validated=!0);else if(e){var v=j(e);if(typeof v=="function"&&v!==e.entries)for(var y=v.call(e),d;!(d=y.next()).done;)pe(d.value)&&Me(d.value,r)}}}function wr(e){{var r=e.type;if(r==null||typeof r=="string")return;var n;if(typeof r=="function")n=r.propTypes;else if(typeof r=="object"&&(r.$$typeof===g||r.$$typeof===c))n=r.propTypes;else return;if(n){var a=U(r);ur(n,e.props,"prop",a,e)}else if(r.PropTypes!==void 0&&!de){de=!0;var v=U(r);b("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",v||"Unknown")}typeof r.getDefaultProps=="function"&&!r.getDefaultProps.isReactClassApproved&&b("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function kr(e){{for(var r=Object.keys(e.props),n=0;n<r.length;n++){var a=r[n];if(a!=="children"&&a!=="key"){J(e),b("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",a),J(null);break}}e.ref!==null&&(J(e),b("Invalid attribute `ref` supplied to `React.Fragment`."),J(null))}}var Le={};function Ke(e,r,n,a,v,y){{var d=tr(e);if(!d){var l="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(l+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var A=br();A?l+=A:l+=Ue();var _;e===null?_="null":le(e)?_="array":e!==void 0&&e.$$typeof===t?(_="<"+(U(e.type)||"Unknown")+" />",l=" Did you accidentally export a JSX literal instead of a component?"):_=typeof e,b("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",_,l)}var T=Er(e,r,n,v,y);if(T==null)return T;if(d){var N=r.children;if(N!==void 0)if(a)if(le(N)){for(var G=0;G<N.length;G++)Ye(N[G],e);Object.freeze&&Object.freeze(N)}else b("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ye(N,e)}if(q.call(r,"key")){var Y=U(e),V=Object.keys(r).filter(function(jr){return jr!=="key"}),he=V.length>0?"{key: someKey, "+V.join(": ..., ")+": ...}":"{key: someKey}";if(!Le[Y+he]){var Or=V.length>0?"{"+V.join(": ..., ")+": ...}":"{}";b(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,he,Y,Or,Y),Le[Y+he]=!0}}return e===o?kr(T):wr(T),T}}function Tr(e,r,n){return Ke(e,r,n,!0)}function Sr(e,r,n){return Ke(e,r,n,!1)}var Cr=Sr,xr=Tr;z.Fragment=o,z.jsx=Cr,z.jsxs=xr}()),z}process.env.NODE_ENV==="production"?ie.exports=Xe():ie.exports=qe();var I=ie.exports;const Qe=({node:i,radius:t})=>{const s=C.useRef(null);return ne.useFrame(()=>{s.current&&s.current.position.copy(i.position)}),I.jsx(He.Sphere,{ref:s,position:i.position,args:[t,32,32],children:I.jsx("meshStandardMaterial",{color:"white"})})},Ze=({startNode:i,endNode:t,thickness:s})=>{const o=C.useRef(null),h=C.useMemo(()=>new p.Vector3(0,1,0),[]),f=C.useMemo(()=>new p.Vector3,[]),w=C.useMemo(()=>new p.Vector3,[]),k=C.useMemo(()=>new p.Vector3,[]),g=C.useMemo(()=>new p.Vector3,[]),R=C.useMemo(()=>new p.Quaternion,[]);return ne.useFrame(()=>{if(o.current){f.copy(i.position),w.copy(t.position);const m=f.distanceTo(w);g.addVectors(f,w).multiplyScalar(.5),k.subVectors(w,f).normalize(),R.setFromUnitVectors(h,k),o.current.position.copy(g),o.current.quaternion.copy(R),o.current.scale.set(1,m,1)}}),I.jsxs("mesh",{ref:o,children:[I.jsx("cylinderGeometry",{args:[s,s,1,16]}),I.jsx("meshStandardMaterial",{color:"white"})]})},ge=({node:i,headRadius:t,strokeWidth:s})=>{const o=i.name==="head"?t:s;return I.jsxs(I.Fragment,{children:[I.jsx(Qe,{node:i,radius:o}),i.children.map(h=>I.jsxs("group",{children:[I.jsx(Ze,{startNode:i,endNode:h,thickness:s}),I.jsx(ge,{node:h,headRadius:t,strokeWidth:s})]},h.id))]})},$e=({projectData:i,isPlaying:t,scale:s=1,loop:o=!0})=>{const h=C.useMemo(()=>i.currentSkeleton.clone(),[i]),f=i.clips.length>0?i.clips[0]:null,w=C.useRef(0);return ne.useFrame((k,g)=>{if(t&&f&&f.keyframes.length>0){let R=w.current+g;if(R>f.duration&&(o?R=0:R=f.duration),w.current=R,f.keyframes.length>=2){let m=f.keyframes[0],c=f.keyframes[f.keyframes.length-1];for(let u=0;u<f.keyframes.length-1;u++)if(f.keyframes[u].timestamp<=R&&f.keyframes[u+1].timestamp>=R){m=f.keyframes[u],c=f.keyframes[u+1];break}if(m&&c){const u=c.timestamp-m.timestamp,O=u>1e-4?(R-m.timestamp)/u:0,E=m.skeleton.lerp(c.skeleton,O),F=E.getAllNodes(),j=h.getAllNodes();for(let W=0;W<j.length;W++){const b=F.find(L=>L.id===j[W].id);b&&j[W].position.copy(b.position)}h.headRadius=E.headRadius,h.strokeWidth=E.strokeWidth}}else if(f.keyframes.length===1){const m=f.keyframes[0].skeleton.getAllNodes(),c=h.getAllNodes();for(let u=0;u<c.length;u++){const O=m.find(E=>E.id===c[u].id);O&&c[u].position.copy(O.position)}}}}),I.jsx("group",{scale:s,children:I.jsx(ge,{node:h.root,headRadius:h.headRadius,strokeWidth:h.strokeWidth})})};S.StickmanPlayer=$e,S.parseStickmanProject=ze,Object.defineProperty(S,Symbol.toStringTag,{value:"Module"})});
